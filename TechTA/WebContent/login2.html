<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Classroom Clicker</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="Expand, contract, animate forms with jQuery wihtout leaving the page" />
        <meta name="keywords" content="expand, form, css3, jquery, animate, width, height, adapt, unobtrusive javascript"/>
		<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
        <link rel="stylesheet" type="text/css" href="content/LoginStyle.css" />
		<script src="content/Logincufon-yui.js" type="text/javascript"></script>
		<script src="content/LoginChunkFive_400.font.js" type="text/javascript"></script>
		<script type="text/javascript">
			Cufon.replace('h1',{ textShadow: '1px 1px #fff'});
			Cufon.replace('h2',{ textShadow: '1px 1px #fff'});
			Cufon.replace('h3',{ textShadow: '1px 1px #000'});
			Cufon.replace('.back');
		</script>
    </head>
    <body>
		<div class="wrapper">
			<h1>Classroom Clicker</h1>
			<h2>The fastest way to  <span>learn</span> ANYTHING</h2>
			<div class="content">
				<div id="form_wrapper" class="form_wrapper">
					<form class="register">
						<h3>Register</h3>
						<div class="column">
							<div>
								<label>Account:</label>
								<input type="text" id="C_account" disabled />
								<span class="error">This is an error</span>
							</div>
							<div>
								<label>Password:</label>
								<input type="password"  id="C_password" disabled />
								<span class="error">This is an error</span>
							</div>
							<div>
								<label>Email:</label>
								<input type="text" id="email" required="required" />
								
								<span class="error">This is an error</span>
							</div>
						</div>
						<div class="column">
							<div>
								<label>Name:</label>
								<input type="text" id="name" required="required" />
								<span class="error">This is an error</span>
							</div>
							<div>
								<label>Department:</label>
								
								<select id="department" required="required" >
								
									<option value='應用數學系' >應用數學系</option>
									<option value='數學教學碩士在職專班' >數學教學碩士在職專班</option>
									<option value='心理學系' >心理學系</option>
									<option value='資訊科學系碩士在職專班' >資訊科學系碩士在職專班</option>
									<option value='資訊科學系' >資訊科學系</option>
									<option value='數位內容碩士學位學程' >數位內容碩士學位學程</option>
									<option value='中國文學系' >中國文學系</option>
									<option value='台灣史研究所' >台灣史研究所</option>
									<option value='歷史學系' >歷史學系</option>
									<option value='台灣文學研究所' >台灣文學研究所</option>
									<option value='哲學系' >哲學系</option>
									<option value='華語文教學碩/博士學位學程' >華語文教學碩/博士學位學程</option>
									<option value='圖書資訊與檔案學研究所' >圖書資訊與檔案學研究所</option>
									<option value='國文教學碩士在職專班' >國文教學碩士在職專班</option>
									<option value='宗教研究所' >宗教研究所</option>
									<option value='華語文教學中心' >華語文教學中心</option>
									<option value='圖書資訊學數位碩士在職專班' >圖書資訊學數位碩士在職專班</option>
									<option value='神經科學研究所' >神經科學研究所</option>
									<option value='輔導與諮商碩士學位學程' >輔導與諮商碩士學位學程</option>
									<option value='應用物理研究所' >應用物理研究所</option>
									<option value='數位內容與科技學士學位學程' >數位內容與科技學士學位學程</option>
									<option value='社會學系' >社會學系</option>
									<option value='國家發展研究所' >國家發展研究所</option>
									<option value='政治學系' >政治學系</option>
									<option value='勞工研究所' >勞工研究所</option>
									<option value='財政學系' >財政學系</option>
									<option value='社會工作研究所' >社會工作研究所</option>
									<option value='公共行政學系' >公共行政學系</option>
									<option value='行政管理碩士學程' >行政管理碩士學程</option>
									<option value='地政學系' >地政學系</option>
									<option value='亞太研究英語碩士學位學程' >亞太研究英語碩士學位學程</option>
									<option value='經濟學系' >經濟學系</option>
									<option value='亞太研究英語博士學位學程' >亞太研究英語博士學位學程</option>
									<option value='民族學系' >民族學系</option>
									<option value='法律學系' >法律學系</option>
									<option value='法學院碩士在職專班' >法學院碩士在職專班</option>
									<option value='法律科際整合研究所' >法律科際整合研究所</option>
									<option value='金融學系' >金融學系</option>
									<option value='風險管理與保險學系' >風險管理與保險學系</option>
									<option value='國際經營與貿易學系' >國際經營與貿易學系</option>
									<option value='科技管理研究所' >科技管理研究所</option>
									<option value='會計學系' >會計學系</option>
									<option value='智慧財產研究所' >智慧財產研究所</option>
									<option value='統計學系' >統計學系</option>
									<option value='經營管理碩士學程' >經營管理碩士學程</option>
									<option value='企業管理學系' >企業管理學系</option>
									<option value='國際經營管理碩士學程' >國際經營管理碩士學程</option>
									<option value='資訊管理學系' >資訊管理學系</option>
									<option value='商管專業學院碩士學程' >商管專業學院碩士學程</option>
									<option value='財務管理學系' >財務管理學系</option>
									<option value='英國語文學系' >英國語文學系</option>
									<option value='土耳其語文學系' >土耳其語文學系</option>
									<option value='阿拉伯語文學系' >阿拉伯語文學系</option>
									<option value='歐洲語文學系' >歐洲語文學系</option>
									<option value='斯拉夫語文學系' >斯拉夫語文學系</option>
									<option value='語言學研究所' >語言學研究所</option>
									<option value='日本語文學系' >日本語文學系</option>
									<option value='外文中心' >外文中心</option>
									<option value='韓國語文學系' >韓國語文學系</option>
									<option value='英語教學碩士在職專班' >英語教學碩士在職專班</option>
									<option value='新聞學系' >新聞學系</option>
									<option value='國際傳播英語碩士學程' >國際傳播英語碩士學程</option>
									<option value='廣告學系' >廣告學系</option>
									<option value='傳播學院學士學位學程' >傳播學院學士學位學程</option>
									<option value='廣播電視學系' >廣播電視學系</option>
									<option value='數位內容碩士學位學程' >數位內容碩士學位學程</option>
									<option value='碩士在職專班' >碩士在職專班</option>
									<option value='實習廣播電台' >實習廣播電台</option>
									<option value='外交學系' >外交學系</option>
									<option value='國際研究英語碩士學位學程' >國際研究英語碩士學位學程</option>
									<option value='東亞研究所' >東亞研究所</option>
									<option value='戰略與國際事務碩士在職專班' >戰略與國際事務碩士在職專班</option>
									<option value='俄羅斯研究所' >俄羅斯研究所</option>
									<option value='國家安全與大陸研究碩士在職專班' >國家安全與大陸研究碩士在職專班</option>
									<option value='日本研究碩士學位學程' >日本研究碩士學位學程</option>
									<option value='教育學系' >教育學系</option>
									<option value='師資培育中心' >師資培育中心</option>
									<option value='幼兒教育研究所' >幼兒教育研究所</option>
									<option value='教師研習中心' >教師研習中心</option>
									<option value='教育行政與政策研究所' >教育行政與政策研究所</option>
									<option value='學校行政碩士在職專班' >學校行政碩士在職專班</option>
									<option value='輔導與諮商碩士學位學程' >輔導與諮商碩士學位學程</option>

								
								
								</select>
								<span class="error">This is an error</span>
							</div>
						</div>
						<div class="bottom">
							<!--<div class="remember">
								<input type="checkbox" />
								<span>Send me updates</span>
							</div>-->
							<input type="submit" value="Register" />
							<a href="index.html" rel="login" class="linkform">You have an account already? Log in here</a>
							<div class="clear"></div>
						</div>
					</form>
					<form class="login active">
						<h3>Login</h3>
						<div>
							<label>Username:</label>
							<input type="text" id="account"/>
							<span class="error">This is an error</span>
						</div>
						<div>
							<label>Password:</label><!-- <a href="forgot_password.html" rel="forgot_password" class="forgot linkform">Forgot your password?</a></label>-->
							<input type="password" id="password"/>
							<span class="error">This is an error</span>
						</div>
						<div class="bottom">
							<!--<div class="remember"><input type="checkbox" /><span>Keep me logged in</span></div>-->
							<input type="submit" value="Login"></input>
							<a href="register.html" rel="register" class="linkform" style="display:none">You don't have an account yet? Register here</a>
							<span class= "announce" >Please use your NCCU account to login</span>
							<div class="clear"></div>
						</div>
					</form>
					<form class="forgot_password">
						<h3>Forgot Password</h3>
						<div>
							<label>Username or Email:</label>
							<input type="text" />
							<span class="error">This is an error</span>
						</div>
						<div class="bottom">
							<input type="submit" value="Send reminder"></input>
							<a href="index.html" rel="login" class="linkform">Suddenly remebered? Log in here</a>
							<a href="register.html" rel="register" class="linkform">You don't have an account? Register here</a>
							<div class="clear"></div>
						</div>
					</form>
				</div>
				<div class="clear"></div>
			</div>
			<a class="back" href="#/">Made by The Best Team </a>
		</div>
		

		<!-- The JavaScript -->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<script type="text/javascript">
			$(function() {
					//the form wrapper (includes all forms)
				var $form_wrapper	= $('#form_wrapper'),
					//the current form is the one with class active
					$currentForm	= $form_wrapper.children('form.active'),
					//the change form links
					$linkform		= $form_wrapper.find('.linkform');
						
				//get width and height of each form and store them for later						
				$form_wrapper.children('form').each(function(i){
					var $theForm	= $(this);
					//solve the inline display none problem when using fadeIn fadeOut
					if(!$theForm.hasClass('active'))
						$theForm.hide();
					$theForm.data({
						width	: $theForm.width(),
						height	: $theForm.height()
					});
				});
				
				//set width and height of wrapper (same of current form)
				setWrapperWidth();
				
				/*
				clicking a link (change form event) in the form
				makes the current form hide.
				The wrapper animates its width and height to the 
				width and height of the new current form.
				After the animation, the new form is shown
				*/
				$linkform.bind('click',function(e){
					var $link	= $(this);
					var target	= $link.attr('rel');
					$currentForm.fadeOut(400,function(){
						//remove class active from current form
						$currentForm.removeClass('active');
						//new current form
						$currentForm= $form_wrapper.children('form.'+target);
						//animate the wrapper
						$form_wrapper.stop()
									 .animate({
										width	: $currentForm.data('width') + 'px',
										height	: $currentForm.data('height') + 'px'
									 },500,function(){
										//new form gets class active
										$currentForm.addClass('active');
										//show the new form
										$currentForm.fadeIn(400);
									 });
					});
					e.preventDefault();
				});
				
				function change(target){
					$currentForm.fadeOut(400,function(){
						//remove class active from current form
						$currentForm.removeClass('active');
						//new current form
						$currentForm= $form_wrapper.children('form.'+target);
						//animate the wrapper
						$form_wrapper.stop()
									 .animate({
										width	: $currentForm.data('width') + 'px',
										height	: $currentForm.data('height') + 'px'
									 },500,function(){
										//new form gets class active
										$currentForm.addClass('active');
										//show the new form
										$currentForm.fadeIn(400);
									 });
					});
					e.preventDefault();
				}
				
				function setWrapperWidth(){
					$form_wrapper.css({
						width	: $currentForm.data('width') + 'px',
						height	: $currentForm.data('height') + 'px'
					});
				}
				
				/*
				for the demo we disabled the submit buttons
				if you submit the form, you need to check the 
				which form was submited, and give the class active 
				to the form you want to show
				*/
				$form_wrapper.find('input[type="submit"]')
							 .click(function(e){
								e.preventDefault();
							 });	
							 
							 
				$form_wrapper.find('.login input[type="submit"]').click( function (){
					
					 $.ajax({
							type: "POST",
							url: "api/LoginAccount",
							data: {
								account:$("#account").val(),
								password:$("#password").val(),
							},
							dataType: "json",
							success:function (data){
								if(data.result == "2"){
									alert("您好! 您為第一次使用本系統,請先填寫資料!");
									$("#C_account").val($("#account").val());
									$("#C_password").val($("#password").val());
									$("#email").val($("#account").val()+"@nccu.edu.tw");
									change('register');
								}
								if(data.result == "1")alert("您的帳號密碼錯誤");
								if(data.result == "0"){
									window.location = "MainPage";
									alert("恭喜您登入!");
								}
							},
							error:function(thrownError){
							  alert(thrownError.responseText);
							}
					  }); 
					 
					return false;
				});
							 
				$form_wrapper.find('.register input[type="submit"]').click( function (){
					 $.ajax({
							type: "POST",
							url: "api/CreateAccount",
							data: {
								"account":$("#C_account").val(),
								"password":$("#C_password").val(),
								"name":$("#name").val(),
								"email":$("#email").val(),
								"department":$("#department").val(),
								
							},
							dataType: "json",
							success:function (data){
								if(data.result == "2"){
									alert("此帳號已被使用");
								}
								if(data.result == "1")alert("data error");
								if(data.result == "3")alert("ws server error");
								if(data.result == "0"){
									$("#account").val($("#C_account").val());
									$("#password").val($("#C_password").val());
									change('login');
									$form_wrapper.find('.login input[type="submit"]').click();
								}
							},
							error:function(thrownError){
							  alert(thrownError.responseText);
							}
							
					  }); 
					 
					return false;
				});

			});
        </script>
    </body>
</html>